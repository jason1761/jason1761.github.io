<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1">
    <script src="ios-orientationchange-fix.min.js"></script>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            background-image: url('source.jpg');
            background-attachment: fixed;
            background-size: cover;
        }
        h1 {
            font-size: 20px;
        }
        div {

        }
        img[usemap] {
            border: none;
            height: auto;
            max-width: 100%;
            width: auto;
        }
        canvas {
            pointer-events: none; /* make the canvas transparent to the mouse - needed since canvas is position infront of image */
            position: absolute;
        }
    </style>
</head>
<body onload='myInit()'>
<canvas id='myCanvas'></canvas>
<!-- Image Map Generated by http://www.image-map.net/ -->
<img usemap="#image-map" id="img-imgmap201293016112">
<map name="image-map">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="1" title="1"  coords="90,27,15" shape="circle" >
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="2" title="2"  coords="290,42,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="3" title="3"  coords="442,28,14" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="4" title="4"  coords="568,25,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="5" title="5"  coords="722,27,14" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="6" title="6"  coords="947,62,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="7" title="7"  coords="52,150,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="8" title="8"  coords="170,195,18" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="9" title="9"  coords="325,186,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="10" title="10"  coords="497,171,15" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="11" title="11"  coords="613,88,20" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="12" title="12"  coords="981,201,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="13" title="13"  coords="85,358,13" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="14" title="14"  coords="249,389,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="15" title="15"  coords="524,380,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="16" title="16"  coords="617,352,18" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="17" title="17"  coords="643,288,15" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="18" title="18"  coords="712,344,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="19" title="19"  coords="814,452,18" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="20" title="20"  coords="845,386,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="21" title="21"  coords="1169,458,29" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="22" title="22"  coords="309,487,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="23" title="23"  coords="638,488,21" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="24" title="24"  coords="893,559,20" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="25" title="25"  coords="1044,589,23" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="26" title="26"  coords="1156,566,18" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="27" title="27"  coords="92,570,23" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="28" title="28"  coords="149,567,18" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="29" title="29"  coords="234,530,19" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="30" title="30"  coords="349,638,19" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="31" title="31"  coords="626,621,19" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="32" title="32"  coords="768,632,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="33" title="33"  coords="1152,698,31" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="34" title="34"  coords="1226,717,19" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="35" title="35"  coords="68,657,19" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="36" title="36"  coords="61,730,15" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="37" title="37"  coords="156,753,14" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="38" title="38"  coords="259,722,17" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="39" title="39"  coords="407,750,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="40" title="40"  coords="631,817,20" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="41" title="41"  coords="819,768,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="42" title="42"  coords="1142,763,19" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="43" title="43"  coords="1203,791,14" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="44" title="44"  coords="93,838,16" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="45" title="45"  coords="179,880,12" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="46" title="46"  coords="333,791,11" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="47" title="47"  coords="450,879,15" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="48" title="48"  coords="629,899,12" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="49" title="49"  coords="793,852,11" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="50" title="50"  coords="819,923,18" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="51" title="51"  coords="1103,920,11" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="52" title="52"  coords="1164,908,9" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="53" title="53"  coords="68,952,11" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="54" title="54"  coords="176,1014,12" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="55" title="55"  coords="492,1106,13" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="56" title="56"  coords="629,1099,11" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="57" title="57"  coords="1030,1026,9" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="58" title="58"  coords="1107,982,11" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="59" title="59"  coords="62,1046,8" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="60" title="60"  coords="62,1124,13" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="61" title="61"  coords="294,1143,6" shape="circle">
    <area onmouseover="myHover(this);" onmouseout="myLeave();"  target="" alt="62" title="62"  coords="1133,1217,7" shape="circle">

    <!--    <area shape="poly" onmouseover='myHover(this);' onmouseout='myLeave();' coords="2,0,604,-3,611,-3,611,166,346,165,345,130,-2,130,-2,124,1,128,1,126"  alt="imgmap201293016112-0" title="imgmap201293016112-0" class="imgmap201293016112-area" id="imgmap201293016112-area-0" />-->

</map>
<script src="jquery.min.js"></script>
<script src="jquery.rwdImageMaps.js"></script>
<script>
    $(document).ready(function(e) {
        $('img[usemap]').rwdImageMaps();

        $('#img-imgmap201293016112').click(function (obj){
            console.log(obj);
            obj.preventDefault();
        });

        $('area').on('click', function() {
            e.preventDefault();
            alert($(this).attr('alt') + ' clicked');
        });
    });

    // stores the device context of the canvas we use to draw the outlines
    // initialized in myInit, used in myHover and myLeave
    var hdc;

    // shorthand func
    function byId(e) {
        return document.getElementById(e);
    }

    // takes a string that contains coords eg - "227,307,261,309, 339,354, 328,371, 240,331"
    // draws a line from each co-ord pair to the next - assumes starting point needs to be repeated as ending point.
    function drawPoly(coOrdStr) {
        var mCoords = coOrdStr.split(',');
        var i, n;
        n = mCoords.length;
        hdc.beginPath();
        hdc.moveTo(mCoords[0], mCoords[1]);
        for (i = 2; i < n; i += 2) {
            hdc.lineTo(mCoords[i], mCoords[i + 1]);
        }
        hdc.lineTo(mCoords[0], mCoords[1]);
        hdc.stroke();
    }

    function drawCircle(coOrdStr,text) {
        var mCoords = coOrdStr.split(',');
        var x, y, radius;
        x = mCoords[0];
        y = mCoords[1];
        radius = mCoords[2];
        console.log("drawCircle =" + mCoords  +", "+ text);

        hdc.beginPath();
        hdc.arc(x, y, radius, 0, 2*Math.PI);
        // hdc.strokeText();
        hdc.stroke();
        hdc.strokeText(text, x-5, y);

    }
    function drawRect(coOrdStr) {
        var mCoords = coOrdStr.split(',');
        var top, left, bot, right;
        left = mCoords[0];
        top = mCoords[1];
        right = mCoords[2];
        bot = mCoords[3];
        hdc.strokeRect(left, top, right - left, bot - top);
    }

    function myHover(element) {
        var hoveredElement = element;
        var coordStr = element.getAttribute('coords');
        var areaType = element.getAttribute('shape');
        var text = element.getAttribute('alt');
        console.log(text);
        switch (areaType) {
            case 'polygon':
            case 'poly':

                drawPoly(coordStr);
                break;

            case 'rect':
                drawRect(coordStr);
            case 'circle':
                drawCircle(coordStr, text);
                break;
        }
    }

    function myLeave() {
        var canvas = byId('myCanvas');
        hdc.clearRect(0, 0, canvas.width, canvas.height);
    }

    function myInit() {
        // get the target image
        var img = byId('img-imgmap201293016112');

        var x, y, w, h;

        // get it's position and width+height
        x = img.offsetLeft;
        y = img.offsetTop;
        w = img.clientWidth;
        h = img.clientHeight;

        // move the canvas, so it's contained by the same parent as the image
        var imgParent = img.parentNode;
        var can = byId('myCanvas');
        imgParent.appendChild(can);

        // place the canvas in front of the image
        can.style.zIndex = 1;

        // position it over the image
        can.style.left = x + 'px';
        can.style.top = y + 'px';

        // make same size as the image
        can.setAttribute('width', w + 'px');
        can.setAttribute('height', h + 'px');

        // get it's context
        hdc = can.getContext('2d');

        // set the 'default' values for the colour/width of fill/stroke operations
        // var gradient=hdc.createLinearGradient(0,0,can.width,0);
        // gradient.addColorStop("0","magenta");
        // gradient.addColorStop("0.5","blue");
        // gradient.addColorStop("1.0","red");
// Fill with gradient

        hdc.fillStyle = 'black';
        hdc.strokeStyle = 'red';
        hdc.lineWidth = 2;
    }

</script>
</body>
</html>