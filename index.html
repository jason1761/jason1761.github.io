<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1">
    <script src="ios-orientationchange-fix.min.js"></script>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
        }

        h1 {
            font-size: 20px;
        }

        img[usemap] {
            border: none;
            height: auto;
            max-width: 100%;
            width: auto;
        }

        div.all-image::before {
            content: url('source.jpg');
        }

        div.all-image {
            top: 0;
            left: 0;

            height: 1281px;
        }

        .circleBase {
            border-radius: 50%;
        }

        .type1 {
            width: 100px;
            height: 100px;
            background: yellow;
            border: 3px solid red;
        }

        .type2 {
            width: 30px;
            height: 30px;
            background: #ccc;
            border: 3px solid #000;
            text-align: center;

        }

        .badge {
            /*background: radial-gradient( 5px -9px, circle, white 8%, red 26px );*/
            background-color: black;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            /*border: 2px solid white;*/
            /*border-radius: 12px; !* one half of ( (border * 2) + height + padding ) *!*/
            box-shadow: 1px 1px 1px black;
            color: white;
            font: bold 15px/13px Helvetica, Verdana, Tahoma;
            height: 16px;
            min-width: 14px;
            padding: 4px 3px 0 3px;
            text-align: center;

        }
    </style>
</head>
<body>
<div class="all-image"></div>
<!--<div id="tag" class="badge">12</div>-->

<script src="jquery.min.js"></script>
<script>
    function mousemove(event) {
        // console.log("pageX: ", event.pageX,
        //     "pageY: ", event.pageY,
        //     "clientX: ", event.clientX,
        //     "clientY:", event.clientY)

        var elm = $('.all-image');
        var xPos = event.pageX - elm.offset().left;
        var yPos = event.pageY - elm.offset().top;

        // console.log("xPos: ", xPos, "yPos: ", yPos);
        show(xPos, yPos);
    }

    window.addEventListener('mousemove', mousemove);


    var json =
        [   { "alt":1, "x":90,"y":27}
            ,{ "alt":2,"x":  290,"y":42}
            ,{ "alt":3,"x":  442,"y":28}
            ,{ "alt":4,"x":  568,"y":25}
            ,{ "alt":5,"x":  722,"y":27}
            ,{ "alt":6,"x":  947,"y":62}
            ,{ "alt":7,"x":  52,"y":150}
            ,{ "alt":8,"x":  170,"y":195}
            ,{ "alt":9,"x":  325,"y":186}
            ,{ "alt":10,"x":  497,"y":171}
            ,{ "alt":11,"x":  613,"y":88}
            ,{ "alt":12,"x":  981,"y":201}
            ,{ "alt":13,"x":  85,"y":358}
            ,{ "alt":14,"x":  249,"y":389}
            ,{ "alt":15,"x":  524,"y":380}
            ,{ "alt":16,"x":  617,"y":352}
            ,{ "alt":17,"x":  643,"y":288}
            ,{ "alt":18,"x":  712,"y":344}
            ,{ "alt":19,"x":  814,"y":452}
            ,{ "alt":20,"x":  845,"y":386}
            ,{ "alt":21,"x":  1169,"y":458}
            ,{ "alt":22,"x":  309,"y":487}
            ,{ "alt":23,"x":  638,"y":488}
            ,{ "alt":24,"x":  893,"y":559}
            ,{ "alt":25,"x":  1044,"y":589}
            ,{ "alt":26,"x":  1156,"y":566}
            ,{ "alt":27,"x":  92,"y":570}
            ,{ "alt":28,"x":  149,"y":567}
            ,{ "alt":29,"x":  234,"y":530}
            ,{ "alt":30,"x":  349,"y":638}
            ,{ "alt":31,"x":  626,"y":621}
            ,{ "alt":32,"x":  768,"y":632}
            ,{ "alt":33,"x":  1152,"y":698}
            ,{ "alt":34,"x":  1226,"y":717}
            ,{ "alt":35,"x":  68,"y":657}
            ,{ "alt":36,"x":  61,"y":730}
            ,{ "alt":37,"x":  156,"y":753}
            ,{ "alt":38,"x":  259,"y":722}
            ,{ "alt":39,"x":  407,"y":750}
            ,{ "alt":40,"x":  631,"y":817}
            ,{ "alt":41,"x":  819,"y":768}
            ,{ "alt":42,"x":  1142,"y":763}
            ,{ "alt":43,"x":  1203,"y":791}
            ,{ "alt":44,"x":  93,"y":838}
            ,{ "alt":45,"x":  179,"y":880}
            ,{ "alt":46,"x":  333,"y":791}
            ,{ "alt":47,"x":  450,"y":879}
            ,{ "alt":48,"x":  629,"y":899}
            ,{ "alt":49,"x":  793,"y":852}
            ,{ "alt":50,"x":  819,"y":923}
            ,{ "alt":51,"x":  1103,"y":920}
            ,{ "alt":52,"x":  1164,"y":908}
            ,{ "alt":53,"x":  68,"y":952}
            ,{ "alt":54,"x":  176,"y":1014}
            ,{ "alt":55,"x":  492,"y":1106}
            ,{ "alt":56,"x":  629,"y":1099}
            ,{ "alt":57,"x":  1030,"y":1026}
            ,{ "alt":58,"x":  1107,"y":982}
            ,{ "alt":59,"x":  62,"y":1046}
            ,{ "alt":60,"x":  62,"y":1124}
            ,{ "alt":61,"x":  294,"y":1143}
            ,{ "alt":62,"x":  1133,"y":1217}
        ];

    $('.all-image').click(function (e) {
        console.log(e);
        var elm = $(this);
        var xPos = e.pageX - elm.offset().left;
        var yPos = e.pageY - elm.offset().top;
        // console.log(xPos, yPos);
        show(xPos, yPos);
    });

    function show(xPos, yPos) {
        $.each(json, function () {
            var obj = this;
            var rX = xPos - obj.x;
            var rY = yPos - obj.y;
            if (rX <= 15 && rX >= -15) {
                // console.log(obj.x);
                console.log("xPos:" + xPos + " obj.x:" + obj.x + "rX=" + rX);
                if (rY <= 15 && rY >= -15) {
                    console.log("yPos:" + yPos + " obj.x:" + obj.y + "rY=" + rY);

                    // alert(obj.alt);

                    var $newdiv1 = $("<div class='badge'>" + obj.alt + "</div>");
                    $($newdiv1).css({
                        "top": obj.y,
                        "left": obj.x-5,
                        "position": "absolute"
                    });
                    $('.all-image').append($newdiv1);
                }

            }

        });
    }
</script>
</body>
</html>